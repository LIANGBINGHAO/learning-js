<!DOCTYPE html>

<html>

<head>

    <meta charset="UTF-8">

    <title></title>

</head>

<body>

    <img id="image" src="" />

    <br />

    <input type="file" onchange="selectImage(this);" />

    <br />

    <script>

        var image = '';

        function selectImage(file) {

            if (!file.files || !file.files[0]) {

                return;

            }

            var reader = new FileReader();

            reader.onload = function (evt) {

                document.getElementById('image').src = evt.target.result;

                image = evt.target.result;

            }

            reader.readAsDataURL(file.files[0]);

        }

    </script>
    <script>
        function sleep(ms) {
            var temple = new Promise(
                (resolve) => {
                    console.log(111); setTimeout(resolve, ms)
                });
            return temple
        }
        sleep(500).then(function () {
            console.log(222)
        })
    </script>

</body>

</html>