<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- å‰è¨€
    å¾ˆå¤šæ—¶å€™é¢è¯•å®˜ä¸ä¼šç²¾ç¡®é—®ä½ æŸä¸ªçŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯æŠ›å‡ºä¸€ä¸ªæœ‰æŒ‡å‘æ€§ä½†æ˜¯åˆå¯ä»¥å¾ˆå‘æ•£çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

    â€œå—¯... é‚£ä½ è¯´è¯´æµè§ˆå™¨çš„ç¼“å­˜å§â€œ

    è¿™æ—¶å€™è€ƒéªŒçš„å°±æ˜¯ä½ å¯¹æµè§ˆå™¨çŸ¥è¯†çš„å¹¿åº¦å’Œæ·±åº¦ã€‚

    å½“æŽ¥åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œä½ å¾—å†·é™æ€è€ƒæœ‰å‡ ä¸ªæ–¹é¢å¯ä»¥å›žç­”ï¼Œå„ä¸ªå¤§æ–¹é¢åˆå¯ä»¥ä»Žå“ªå‡ ä¸ªå°æ–¹é¢è¯´ã€‚

    çŸ¥è¯†ç‚¹
    æµè§ˆå™¨ç¼“å­˜è¿™ä¸€å—å¯ä»¥ç²¾ç¡®åœ°å›žç­”ä¸€ä¸‹å‡ ä¸ªå¤§æ–¹é¢ï¼š

    ç¼“å­˜çš„ç±»åž‹ï¼ˆå¼ºç¼“å­˜ or åå•†ç¼“å­˜ï¼‰
    ç¼“å­˜ä½ç½®ï¼ˆService Workerã€Memory Cache...ï¼‰
    ç¼“å­˜è¿‡ç¨‹åˆ†æž
    ç¼“å­˜ç­–ç•¥çš„å®žé™…åœºæ™¯åº”ç”¨
    ç¼“å­˜çš„ç±»åž‹
    é¦–å…ˆä»Žç¼“å­˜çš„ç±»åž‹ä¸Šè¯´ï¼Œç¼“å­˜åˆ†ä¸º å¼ºç¼“å­˜ å’Œ åå•†ç¼“å­˜

    å¼ºç¼“å­˜æ˜¯ ä¸éœ€è¦å‘é€ HTTP è¯·æ±‚çš„ï¼Œè€Œåå•†ç¼“å­˜éœ€è¦ã€‚

    ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å‘é€ HTTP è¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆæ£€æŸ¥ä¸€ä¸‹å¼ºç¼“å­˜ï¼Œå¦‚æžœå‘½ä¸­ç›´æŽ¥ä½¿ç”¨ï¼Œå¦åˆ™å°±è¿›å…¥ä¸‹ä¸€æ­¥ã€‚

    å¼ºç¼“å­˜
    æµè§ˆå™¨æ£€æŸ¥å¼ºç¼“å­˜çš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ä¸ªå­—æ®µï¼š

    HTTP/1.0 æ—¶æœŸä½¿ç”¨ Expires
    HTTP/1.1 æ—¶æœŸä½¿ç”¨ Cache-Control
    Expires
    Expires å­—é¢æ„æ€æ˜¯æœ‰æ•ˆæœŸï¼Œæ‰€ä»¥å®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå…·ä½“çš„æ—¶é—´ï¼Œä¾‹å¦‚ï¼š

    Expires: Wed, Nov 11 2020 08:00:00 GMT
    è¡¨ç¤ºçš„æ˜¯è¿™ä¸ªèµ„æºå°†åœ¨ 2020å¹´11æœˆ11æ—¥ 8 ç‚¹è¿‡æœŸï¼Œè¿‡æœŸå°±å¾—é‡æ–°å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ã€‚

    å¾ˆæœ‰æ„æ€çš„æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æœåŠ¡ç«¯çš„æ—¶é—´ä¸Žå®¢æˆ·ç«¯çš„æ—¶é—´å…¶å®žæ˜¯å¹¶ä¸ä¸€è‡´çš„ï¼Œé‚£ä¹ˆå¦‚æžœè®¾ç½®äº† Expires å­—æ®µå°±å¾ˆæœ‰å¯èƒ½é€ æˆç¼“å­˜å¤±æ•ˆï¼Œå› æ­¤è¿™ç§æ–¹å¼å¹¶ä¸å‡†ç¡®ï¼Œæ‰€ä»¥åœ¨ HTTP/1.1 è¢«æ‘’å¼ƒäº†ã€‚

    Cache-Control
    æ‘’å¼ƒäº† Expires ä¹‹åŽï¼ŒHTTP/1.1 é‡‡ç”¨äº† Cache-Control è¿™ä¸ªé‡è¦è§„åˆ™ï¼Œå®ƒè®¾ç½®äº†ä¸€ä¸ªå…·ä½“çš„è¿‡æœŸæ—¶é•¿ï¼Œå…¶ä¸­çš„ä¸€ä¸ªå±žæ€§æ˜¯ max-ageã€‚

    Cache-Control: max-age=300
    è¿™è¡¨ç¤ºå½“å‰èµ„æºä¼šåœ¨ 300s åŽè¿‡æœŸã€‚

    Cache-Control ä¸ä»…ä»…å«æœ‰ä¸€ä¸ª max-age çš„å±žæ€§ï¼Œä»–è¿˜æœ‰å¾ˆå¤šç”¨æ³•ï¼Œ ç”šè‡³è¿˜å¯ä»¥é‡‡ç”¨ç»„åˆçš„æ–¹å¼ï¼š

    Cache-Control: public, max-age=300
    ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸ç”¨æŒ‡ä»¤ï¼š

    publicï¼šå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜ï¼Œå“åº”å¯ä»¥è¢«ä¸­é—´ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ç¼“å­˜
    privateï¼šè¿™ä¸ªæ˜¯ Cache-Control çš„é»˜è®¤å–å€¼ï¼Œåªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼Œä¸­é—´èŠ‚ç‚¹ä¸å…è®¸ç¼“å­˜
    no-cacheï¼šè¡¨ç¤ºä¸è¿›è¡Œå¼ºç¼“å­˜éªŒè¯ï¼Œè€Œæ˜¯ç”¨åå•†ç¼“å­˜æ¥éªŒè¯
    no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œæ—¢ä¸ä½¿ç”¨å¼ºç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜
    max-ageï¼šè¡¨ç¤ºå¤šä¹…æ—¶é—´ä¹‹åŽè¿‡æœŸ
    s-max-ageï¼šä½œç”¨åŒ max-ageï¼Œä½†æ˜¯è¡¨ç¤ºä»£ç†ç¼“å­˜ï¼Œä¸”ä¼˜å…ˆçº§æ›´é«˜
    max-staleï¼šèƒ½å®¹å¿çš„æœ€å¤§è¿‡æœŸæ—¶é—´
    min-freshï¼šèƒ½å®¹å¿çš„æœ€å°æ–°é²œåº¦


    å¯¹æ¯”
    Expires äº§äºŽ HTTP/1.0ï¼Œè€Œ Cache-Control äº§äºŽ HTTP/1.1
    Expires è®¾ç½®çš„æ˜¯ä¸€ä¸ªå…·ä½“çš„æ—¶é—´ï¼ŒCache-Control å¯ä»¥è®¾ç½®é™¤æ—¶é—´ä»¥å¤–çš„å…¶ä»–å±žæ€§
    ä¸¤è€…åŒæ—¶å­˜åœ¨æ—¶ï¼ŒCache-Control ä¼˜å…ˆçº§æ›´é«˜
    åœ¨ä¸æ”¯æŒ HTTP/1.1 çš„çŽ¯å¢ƒä¸‹ï¼ŒExpires å°±ä¼šå‘æŒ¥ä½œç”¨ï¼Œæ‰€ä»¥çŽ°é˜¶æ®µçš„å­˜åœ¨æ˜¯ä¸ºäº†åšä¸€äº›å…¼å®¹å¤„ç†
    åå•†ç¼“å­˜
    ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†å¼ºç¼“å­˜ï¼Œå¦‚æžœå¼ºç¼“å­˜å¤±æ•ˆï¼Œåˆ™ä¼šè¿›å…¥åå•†ç¼“å­˜ã€‚

    åå•†ç¼“å­˜æ¦‚æ‹¬èµ·æ¥å°±æ˜¯æµè§ˆå™¨ä¼šæºå¸¦ç¼“å­˜æ ‡è¯†ï¼ˆtagï¼‰å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®ç¼“å­˜æ ‡è¯†ï¼ˆtagï¼‰æ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ã€‚

    æ‰€ä»¥å¯¹äºŽæœåŠ¡å™¨æ¥è¯´ï¼Œè¿”å›žçš„ç»“æžœä¼šæœ‰ä¸¤ç§ï¼š

    åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›ž 304 çŠ¶æ€ç å’Œ Not Modifiedï¼ˆç©ºçš„å“åº”ä½“ï¼‰
    åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›ž 200 å’Œè¯·æ±‚ç»“æžœ
    åå•†ç¼“å­˜åˆ†ä¸º Last-Modified å’Œ ETag ä¸¤ä¸ªå­—æ®µæŽ§åˆ¶ã€‚

    Last-Modified å’Œ If-Modified-Since
    ä»Žå­—é¢æ„æ€ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒLast-Modified è¡¨ç¤ºçš„æ˜¯èµ„æºæœ€åŽçš„ä¿®æ”¹æ—¶é—´ï¼Œå®ƒçš„å®žçŽ°æ–¹å¼æ˜¯ï¼š

    æµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘æœåŠ¡å™¨è¯·æ±‚è¯¥èµ„æº
    æœåŠ¡å™¨åœ¨è¿”å›žè¿™ä¸ªèµ„æºçš„åŒæ—¶ï¼Œä¼šåœ¨å“åº”å¤´ä¸­æ·»åŠ  Last-Modified çš„å­—æ®µï¼Œå€¼ä¸ºæœ€åŽçš„ä¿®æ”¹æ—¶é—´
    å½“æµè§ˆå™¨æŽ¥æ”¶åŽç¼“å­˜æ–‡ä»¶å’Œè¿™ä¸ª header
    å½“ä¸‹ä¸€æ¬¡æµè§ˆå™¨å†æ¬¡å‘é€è¯·æ±‚è¯·æ±‚è¯¥èµ„æºçš„æ—¶å€™ï¼Œæ£€æµ‹åˆ°æœ‰ Last-Modified è¿™ä¸ª headerï¼Œå°±ä¼šåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  If-Modified-Since è¿™ä¸ªå­—æ®µï¼Œå€¼ä¸º Last-Modified
    æœåŠ¡å™¨æŽ¥æ”¶åˆ°è¯·æ±‚ä¹‹åŽï¼Œæ ¹æ® If-Modified-Since ä¸ŽæœåŠ¡å™¨çš„è¿™ä¸€èµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´åšå¯¹æ¯”
    å¦‚æžœç»“æžœç›¸åŒï¼Œåˆ™è¿”å›ž 304 çŠ¶æ€ç å’Œä¸€ä¸ªç©ºçš„å“åº”é¢˜ï¼Œå‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨ç¼“å­˜
    åä¹‹ï¼Œè¿”å›ž 200 çŠ¶æ€ç å’Œè¯·æ±‚çš„èµ„æºï¼ŒåŒæ—¶åœ¨å“åº”å¤´ä¸­æ›´æ–° Last-Modified


    ETag å’Œ If-None-Match
    Etag çš„åŽŸç†å…¶å®žå’Œ Last-Modified ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒæ˜¯æ ¹æ®ä¸€ä¸ªå”¯ä¸€æ ‡è¯†æ¥è¿›è¡Œåˆ¤æ–­ã€‚

    å½“æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨èµ„æºçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œç»™æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼Œè‹¥æ˜¯æ–‡ä»¶å‘ç”Ÿä¿®æ”¹ï¼Œåˆ™æ ‡è¯†ä¹Ÿä¼šä¿®æ”¹ã€‚

    æœåŠ¡å™¨åœ¨å“åº”è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šåœ¨å“åº”å¤´æ·»åŠ ä¸€ä¸ª ETag çš„å­—æ®µï¼Œå€¼ä¸ºè¿™ä¸ªæ–‡ä»¶å½“å‰çš„å”¯ä¸€æ ‡è¯†ã€‚

    æµè§ˆå™¨åœ¨æŽ¥æ”¶åˆ°æ–‡ä»¶å¹¶ç¼“å­˜æ–‡ä»¶å’Œ è¯·æ±‚çš„å“åº”å¤´ã€‚

    åœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚è¿™ä¸ªèµ„æºçš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´ä¸ŠåŠ ä¸€ä¸ª If-None-Match çš„å­—æ®µï¼Œå€¼ä¸º ETagã€‚

    æœåŠ¡å™¨ç”¨è¯·æ±‚å¤´ä¸Šçš„å€¼å’Œæœ¬åœ°èµ„æºçš„å€¼è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æžœå‘½ä¸­åˆ™è¿”å›ž 304 å‘ŠçŸ¥æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œå¦åˆ™è¿”å›ž 200 å’Œæœ€æ–°çš„èµ„æºæ–‡ä»¶ã€‚



    ä¸¤è€…å¯¹æ¯”
    é¦–å…ˆå¯¹äºŽ Last-Modifiedï¼š

    è‹¥æ˜¯æœ¬åœ°æ‰“å¼€äº†ç¼“å­˜æ–‡ä»¶ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰ä¿®æ”¹æ–‡ä»¶ï¼Œä¹Ÿè¿˜æ˜¯ä¼šæ”¹å˜æœ€åŽçš„ä¿®æ”¹æ—¶é—´ï¼Œå¯¼è‡´ç¼“å­˜å¤±è´¥ï¼›
    ç”±äºŽ Last-Modified æ˜¯ä»¥ç§’ä½œä¸ºè®¡æ—¶å•ä½ï¼Œè‹¥æ˜¯æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨æ˜¯åœ¨ç§’çº§ä»¥å†…çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¹‹åŽå°±æ— æ³•è¢«è®°å½•å¯¼è‡´ç¼“å­˜å‘½ä¸­é”™è¯¯ã€‚
    å¯¹äºŽ ETagï¼š

    æ€§èƒ½ä¸Šä¼šæ¯” Last-Modified å·®ï¼Œå› ä¸ºåªè¦æ–‡ä»¶å‘ç”Ÿä¿®æ”¹ï¼Œå°±ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ hash å€¼ã€‚
    ç»¼ä¸Šï¼š

    å‡†ç¡®åº¦ä¸Šï¼ŒETag è¦é«˜äºŽ Last-Modified
    æ€§èƒ½ä¸Š Last-Modified æ›´å¥½
    ä¸¤è€…éƒ½æ”¯æŒçš„è¯ï¼ŒETag ä¼˜å…ˆçº§æ›´é«˜
    ç¼“å­˜ä½ç½®
    åœ¨ä¸Šé¢ðŸ‘†æˆ‘ä»¬å·²ç»ä»‹ç»å®Œäº†ç¼“å­˜çš„ç±»åž‹ðŸ˜„, ä½†æ˜¯ä¹‹å‰ä¹Ÿæåˆ°è¿‡äº†, è‹¥æ˜¯å‘½ä¸­äº† å¼ºç¼“å­˜ æˆ–è€…æœåŠ¡å™¨è¿”å›žäº† 304 ä¹‹åŽ, è¦æµè§ˆå™¨ä»Žç¼“å­˜ä¸­è¿‡åŽ»èµ„æº, é‚£è¿™äº›ç¼“å­˜å…·ä½“æ˜¯å­˜å‚¨åœ¨å“ªé‡Œå‘¢?

    ä»Žä¼˜å…ˆçº§ä¸Šè¯´ï¼Œç¼“å­˜ä½ç½®åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š

    Service Worker
    Memory Cache
    Disk Cache
    Push Cache
    Service Worker
    Service Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨èƒŒåŽçš„ç‹¬ç«‹çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–è„±ç¦»äº†æµè§ˆå™¨çš„çª—ä½“ï¼Œæ— æ³•ç›´æŽ¥è®¿é—® DOMã€‚åŠŸèƒ½ä¸Šä¸»è¦èƒ½å®žçŽ°ï¼šç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æŽ¨é€ã€ç½‘ç»œä»£ç†ç­‰ã€‚æ¯”å¦‚ç¦»çº¿ç¼“å­˜å°±æ˜¯ Service Worker Cacheã€‚

    ç®€å•æ¥è¯´ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š

    å€Ÿé‰´äº† Web Worker
    ä½¿ç”¨ Service Worker ä¼šæ¶‰åŠè¯·æ±‚æ‹¦æˆªï¼Œæ‰€ä»¥éœ€è¦ç”¨ HTTPS åè®®æ¥ä¿è¯å®‰å…¨ï¼Œä¼ è¾“åè®®å¿…é¡»æ˜¯ HTTPS
    ä¸Žæµè§ˆå™¨å…¶ä»–å†…å»ºçš„ç¼“å­˜æœºåˆ¶ä¸åŒï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„æŽ§åˆ¶ç¼“å­˜é‚£äº›æ–‡ä»¶ã€å¦‚ä½•åŒ¹é…è¯»å–ç¼“å­˜ï¼Œä¸”ç¼“å­˜æ˜¯æŒç»­æ€§çš„
    Service Worker åŒæ—¶ä¹Ÿæ˜¯ PWA çš„é‡è¦å®žçŽ°æœºåˆ¶
    Memory Cache
    å†…å­˜ç¼“å­˜ï¼Œå­˜å‚¨çš„ä¸»è¦æ˜¯å½“å‰ç½‘é¡µä¸Šå·²ç»æŠ“å–åˆ°çš„èµ„æºï¼Œæ¯”å¦‚ç½‘é¡µä¸Šå·²ç»ä¸‹è½½çš„æ ·å¼ã€è„šæœ¬ã€å›¾ç‰‡ç­‰ã€‚

    Memory Cache çš„ç‰¹ç‚¹æ˜¯ï¼š

    è¯»å–æ•ˆçŽ‡é«˜ï¼Œä½†æ˜¯æŒç»­æ—¶é—´çŸ­ï¼Œä¼šéšç€è¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾ï¼ˆä¸€æ—¦å…³é—­ Tab é¡µé¢å°±ä¼šè¢«é‡Šæ”¾ï¼Œç”šè‡³æœ‰æ—¶å€™æ²¡å…³é—­å‰ï¼ŒæŽ’åœ¨å‰é¢çš„ç¼“å­˜å°±å·²ç»å¤±æ•ˆäº†ï¼‰
    å‡ ä¹Žæ‰€æœ‰çš„è¯·æ±‚èµ„æºéƒ½èƒ½è¿›å…¥ memory cacheï¼Œç»†åˆ†æ¥è¯´ä¸»è¦åˆ†ä¸º preloader å’Œ preload è¿™ä¸¤å—
    åœ¨ä»Ž memory cache è¯»å–ç¼“å­˜æ—¶ï¼Œæµè§ˆå™¨ä¼šå¿½è§† Cache-Control ä¸­çš„ä¸€äº› max-ageã€no-cache ç­‰å¤´éƒ¨è®¾ç½®ï¼Œé™¤éžè®¾ç½®äº† no-store è¿™ä¸ªå¤´éƒ¨è®¾ç½®
    preloader
    ä¸Šé¢æåˆ°çš„ preloader æ˜¯é¡µé¢ä¼˜åŒ–çš„å¸¸è§æ‰‹æ®µä¹‹ä¸€ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ åœ¨æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªç½‘é¡µçš„æ—¶å€™ï¼Œèƒ½å¤Ÿä¸€è¾¹è§£æžæ‰§è¡Œ js/cssï¼Œä¸€è¾¹åŽ»è¯·æ±‚ä¸‹ä¸€ä¸ªèµ„æºï¼Œè€Œè¿™äº›è¢« preloader è¯·æ±‚æ¥çš„èµ„æºå°±ä¼šè¢«æ”¾å…¥ memory
    cache ä¸­ï¼Œä¾›ä¹‹åŽçš„è§£æžæ‰§è¡Œæ“ä½œä½¿ç”¨ã€‚

    preload
    preload å’Œ preloader é•¿å¾—éžå¸¸ç›¸ä¼¼ï¼Œå®ƒèƒ½å¤Ÿæ˜¾å¼æŒ‡å®šé¢„åŠ è½½çš„èµ„æºï¼Œè¿™äº›èµ„æºä¹Ÿä¼šè¢«æ”¾è¿› memory cache ä¸­ï¼Œä¾‹å¦‚

    <link rel="preload">
    Disk Cache
    Disk Cacheï¼Œä¹Ÿå« HTTP Cacheï¼Œæ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œæ‰€ä»¥å®ƒçš„ç‰¹ç‚¹æ˜¯æŒç»­æ—¶é—´é•¿ï¼Œæ˜¯å®žé™…å­˜åœ¨äºŽæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¼“å­˜ã€‚

    ä»Žå­˜å‚¨æ•ˆçŽ‡ä¸Šè¯´ï¼Œå®ƒæ¯”å†…å­˜ç¼“å­˜æ…¢ï¼Œä½†æ˜¯ä¼˜åŠ¿åœ¨äºŽå­˜å‚¨å®¹é‡å¤§ï¼ŒæŒç»­æ—¶é—´æ›´é•¿ã€‚

    åœ¨æ‰€æœ‰æµè§ˆå™¨ç¼“å­˜ä¸­ï¼ŒDisk Cache æ˜¯è¦†ç›–é¢æœ€å¤§çš„ï¼Œå®ƒä¼šæ ¹æ®å‰é¢æˆ‘ä»¬æåˆ°çš„ HTTP header ä¸­çš„ç¼“å­˜å­—æ®µæ¥åˆ¤æ–­å“ªäº›èµ„æºéœ€è¦ç¼“å­˜ï¼Œå“ªäº›èµ„æºä¸éœ€è¦è¯·æ±‚è€Œç›´æŽ¥ä½¿ç”¨ï¼Œå“ªäº›å·²ç»è¿‡æœŸäº†éœ€è¦é‡æ–°è¯·æ±‚èŽ·å–ã€‚

    è‹¥æ˜¯å‘½ä¸­ç¼“å­˜ä¹‹åŽï¼Œæµè§ˆå™¨ä¼šä»Žç¡¬ç›˜ä¸­ç›´æŽ¥è¯»å–èµ„æºï¼Œè™½ç„¶æ²¡æœ‰ä»Žå†…å­˜ä¸­è¯»å–å¿«ï¼Œä½†æ˜¯ä»ç„¶æ¯”ç½‘ç»œä¸‹è½½å¿«ã€‚

    å‰é¢æåˆ°çš„å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ä¹Ÿæ˜¯å±žäºŽ Disk Cacheï¼Œä»–ä»¬æœ€ç»ˆéƒ½å­˜å‚¨åœ¨ç¡¬ç›˜é‡Œã€‚

    Disk Cache å’Œ Memory Cache ä¹‹é—´çš„å¯¹æ¯”ï¼š

    æ¯”è¾ƒå¤§çš„ JSã€CSS æ–‡ä»¶ä¼šè¢«ä¸¢åœ¨ç¡¬ç›˜ä¸­å­˜å‚¨ï¼Œåä¹‹åˆ™å­˜å‚¨åœ¨å†…å­˜ä¸­
    å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡æ¯”è¾ƒé«˜çš„æ—¶å€™ï¼Œæ–‡ä»¶ä¼˜å…ˆè¿›å…¥ç£ç›˜
    Push Cache
    Push Cacheï¼ˆæŽ¨é€ç¼“å­˜ï¼‰ï¼Œå®ƒæ˜¯æµè§ˆå™¨ç¼“å­˜çš„æœ€åŽä¸€é“é˜²çº¿ï¼Œå½“ä»¥ä¸Šä¸‰ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šè¢«ä½¿ç”¨ã€‚

    å®ƒåªä¼šåœ¨ä¼šè¯ï¼ˆSessionï¼‰ä¸­å­˜åœ¨ï¼Œä¸€æ—¦ä¼šè¯ç»“æŸå°±ä¼šè¢«é‡Šæ”¾ï¼Œå¹¶ä¸”ç¼“å­˜æ—¶é—´éžå¸¸çŸ­ï¼Œåœ¨ Chrome æµè§ˆå™¨ä¸­åªæœ‰ 5 åˆ†é’Ÿã€‚

    å¦å¤–ç”±äºŽå®ƒæ˜¯ HTTP/2 çš„äº§ç‰©ï¼Œæ‰€ä»¥å›½å†…æ™®åŠç¨‹åº¦ä¸é«˜ï¼Œè¿™é‡Œè´´ä¸Šä¸€ä¸ªæ€»ç»“ï¼š

    æ‰€æœ‰èµ„æºéƒ½èƒ½è¢«æŽ¨é€ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç¼“å­˜ï¼Œä½†æ˜¯ Edge å’Œ Safari æ”¯æŒç›¸å¯¹æ¯”è¾ƒå·®
    å¯ä»¥æŽ¨é€ no-cache å’Œ no-store çš„èµ„æº
    ä¸€æ—¦è¿žæŽ¥è¢«å…³é—­ï¼ŒPush Cache å°±ä¼šè¢«é‡Šæ”¾
    å¤šä¸ªé¡µé¢å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª HTTP/2 çš„è¿žæŽ¥ï¼Œä¹Ÿå°±å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª Push Cacheã€‚è¿™ä¸»è¦è¿˜æ˜¯ä¾èµ–æµè§ˆå™¨çš„å®žçŽ°ï¼Œå‡ºäºŽå¯¹æ€§èƒ½çš„è€ƒè™‘ï¼Œæœ‰äº›æµè§ˆå™¨ä¼šå¯¹ç›¸åŒåŸŸåä½†ä¸åŒ tab æ ‡ç­¾ä½¿ç”¨åŒä¸€ä¸ª HTTP è¯·æ±‚
    Push Cache ä¸­çš„ç¼“å­˜åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡
    æµè§ˆå™¨å¯ä»¥æ‹’ç»æŽ¥å—å·²ç»å­˜åœ¨çš„èµ„æºæŽ¨é€
    ä½ å¯ä»¥ç»™å…¶ä»–åŸŸåæŽ¨é€èµ„æº
    ç¼“å­˜è¿‡ç¨‹åˆ†æž
    ä¸Šé¢å·²ç»ä»‹ç»äº†ç¼“å­˜ç±»åž‹å’Œç¼“å­˜ä½ç½®ï¼Œé‚£ä¹ˆæµè§ˆå™¨æ˜¯å¦‚ä½•å¤„ç†ç¼“å­˜ï¼Ÿ

    ä»Žæµè§ˆå™¨å‘èµ· HTTP è¯·æ±‚åˆ°èŽ·å¾—è¯·æ±‚ç»“æžœï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

    æµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘èµ· HTTP è¯·æ±‚ï¼Œåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æ²¡æœ‰å‘çŽ°ç¼“å­˜ç»“æžœå’Œç¼“å­˜æ ‡è¯†
    å› æ­¤å‘æœåŠ¡å™¨å‘èµ· HTTP è¯·æ±‚ï¼ŒèŽ·å¾—è¯¥è¯·æ±‚çš„ç»“æžœä»¥åŠç¼“å­˜è§„åˆ™ï¼ˆä¹Ÿå°±æ˜¯ Last-Modified æˆ–è€…æ˜¯ ETagï¼‰
    æµè§ˆå™¨æŠŠå“åº”å†…å®¹å­˜å…¥ Disk Cacheï¼ŒæŠŠå“åº”å†…å®¹çš„å¼•ç”¨å­˜å…¥ Memory Cache
    æŠŠå“åº”å†…å®¹å­˜å…¥ Service Worker çš„ Cache Storageï¼ˆå¦‚æžœ Service Worker çš„è„šæœ¬è°ƒç”¨äº† cache.put()ï¼‰
    ä¸‹ä¸€æ¬¡è¯·æ±‚ç›¸åŒèµ„æºçš„æ—¶å€™ï¼š

    è°ƒç”¨ Service Worker çš„ fetch äº‹ä»¶å“åº”
    æŸ¥çœ‹ memory cache
    æŸ¥çœ‹ disk cacheï¼Œè¿™é‡Œç»†åˆ†ä¸ºï¼š
    æœ‰å¼ºç¼“å­˜ä¸”æœªå¤±æ•ˆï¼Œåˆ™æ˜¯ç”¨å¼ºç¼“å­˜ï¼Œä¸è¯·æ±‚æœåŠ¡å™¨ï¼Œè¿”å›žçš„çŠ¶æ€ç éƒ½æ˜¯ 200
    æœ‰å¼ºç¼“å­˜ä¸”å·²å¤±æ•ˆï¼Œä½¿ç”¨åå•†ç¼“å­˜åˆ¤æ–­ï¼Œæ˜¯è¿”å›ž 304 æˆ–è€…æ˜¯ 200
    ç¼“å­˜ç­–ç•¥çš„å®žé™…ä½¿ç”¨åœºæ™¯
    ä¸å¸¸å˜åŒ–çš„èµ„æº
    å¯¹äºŽä¸å¸¸å˜åŒ–çš„èµ„æºï¼š

    Cache-Control: max-age=31536000
    é€šå¸¸ç»™ Cache-Control è®¾ç½®ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼ˆæ¯”å¦‚ä¸€å¹´ï¼‰ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸ºäº†è§£å†³æ›´æ–°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ–‡ä»¶ä¸Šæ·»åŠ ä¸€ä¸ª hashï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æ›´æ”¹å¼•ç”¨ URL çš„ç›®çš„ã€‚

    å¸¸å˜åŒ–çš„èµ„æº
    å¯¹äºŽç»å¸¸å˜åŒ–çš„èµ„æºï¼š

    Cache-Control: no-cache
    æˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨å¼ºç¼“å­˜ï¼Œæ¯æ¬¡éƒ½å‘æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œç„¶åŽé…åˆ ETag æˆ–è€… Last-Modified æ¥éªŒè¯èµ„æºç¼“å­˜æ˜¯å¦æœ‰æ•ˆã€‚ -->
</body>

</html>